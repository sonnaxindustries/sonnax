<fieldset>
  <legend>Account Information</legend>
  
  <div class="login text">
    <%= f.error_message_on :login %>
    <%= f.label :login, 'Username' %>
    <%= f.text_field :login %>
  </div>
  
  <div class="password text">
    <%= f.error_message_on :password %>
    <%= f.label :password, f.object.new_record? ? nil : "Change Password" %>
    <%= f.password_field :password %>
  </div>
  
  <div class="password text confirm">
    <%= f.error_message_on :password_confirmation %>
    <%= f.label :password_confirmation %>
    <%= f.password_field :password_confirmation %>
  </div>
</fieldset>
<% if @roles.any? %>
<fieldset>
	<legend>Role Information</legend>
	<p>The roles that this user will have.</p>
	<%= hidden_field_tag "user[role_ids][]", '' %>
	<% content_tag :div, :class => 'users' do -%>
		<% @roles.each do |s| -%>
			<% div_for s do %>
				<label>
					<%= check_box_tag "user[role_ids][]", s.id, @user.roles.include?(s) %>
					<%= s.name %>
				</label>
			<% end -%>
		<% end -%>
	<% end -%>
</fieldset>
<% end %>